<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录界面</title>
</head>
<body>
<div style="margin: 100px auto; background: #ddd; height: 180px;width: 300px;">
    <div style="width: 100%; height: 30px;padding-top: 20px;text-align:center;">
        <label for="username">用户名：</label>
        <input id="username" name="username" type="text">
    </div>
    <div style="width: 100%; height: 30px;padding-top: 20px;text-align:center;">
        <label for="password">密&nbsp;码：</label>
        <input id="password" name="password" type="text">
    </div>
    <div style="width: 100%; height: 30px;padding-top: 20px;text-align:center;">
        <button style="width: 100px; height: 30px;" onclick="login()">登录</button>
    </div>
</div>
<script>
    function login() {

        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        if (username === "" || password === "") {
            alert("用户名或密码不能为空！")
            return;
        }
        // 原生ajax
        var request = new XMLHttpRequest();
        request.open("POST", "/login/in", true);
        request.setRequestHeader("Content-type", "application/json;charset=utf-8");
        request.onreadystatechange = function () {
            if (request.readyState == 4 && request.status == 200) {  // 304未修改
                var res = JSON.parse(request.responseText);
                if(!res.ok) {
                    alert("登录失败！")
                } else {
                    alert("登录成功！")
                }
            }
        };
        var data = {
            "username": username,
            "password": password
        };
        request.send(JSON.stringify(data));
    }
</script>
</body>
</html>